@page "/Addresses/Create"
@inject AddressesController controller
@inject NavigationManager navigationManager

<div class="row mt-2 mb-5">

    <h3 class="card-title text-info mb-3 ml-3">@title Address</h3>
    <div class="col-md-6">
        <div class="card bg-info">
            <div class="card-body">
                <EditForm Model="address" OnValidSubmit="SaveAddress">
                    
                    <DataAnnotationsValidator></DataAnnotationsValidator>
                    <ValidationSummary></ValidationSummary>
                    
                    <div>
                        <label class="form-label">House No:</label>
                        <InputNumber class="form-control" @bind-Value="address.HouseNumber"></InputNumber>
                        @*<ValidationMessage For="()=>address.HouseNumber"></ValidationMessage>*@
                    </div>
                    <div>
                        <label class="form-label">House Name:</label>
                        <InputText class="form-control" @bind-Value="address.HouseName"></InputText>
                    </div>
                    <div>
                        <label class="form-label">Road Name:</label>
                        <InputText class="form-control" @bind-Value="address.RoadName"></InputText>
                    </div>
                    <div>
                        <label class="form-label">Town:</label>
                        <InputText class="form-control" @bind-Value="address.PostTown"></InputText>
                    </div>
                    <div>
                        <label class="form-label">Post Code:</label>
                        <InputText class="form-control" @bind-Value="address.Postcode"></InputText>
                    </div>
                    <div class="mt-3 float-end">
                        <button class="btn btn-success">Save Changes</button>
                        <NavLink href="Addresses" class="btn btn-secondary">Back to List</NavLink>
                    </div>
                </EditForm>
            </div>
        </div>
    </div>

</div>

@code 
{
    private Address address { get; set; } = new();

    private string title { get; set; } = "Create";

    private async Task SaveAddress()
    {
        await controller.PostAddress(address);
        navigationManager.NavigateTo("addresses");
    }
}
